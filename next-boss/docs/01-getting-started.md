# 01. Next.jsã‚’å§‹ã‚ã‚ˆã†

Next.jsã¯ã€Reactãƒ™ãƒ¼ã‚¹ã®ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã€ãƒ¢ãƒ€ãƒ³ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚’åŠ¹ç‡åŒ–ã—ã¾ã™ã€‚ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€Next.jsã®åŸºæœ¬æ¦‚å¿µã‹ã‚‰å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã¾ã§ã€æ®µéšçš„ã«å­¦ç¿’ã—ã¦ã„ãã¾ã™ã€‚

## ğŸ¯ ã“ã®ç« ã®å­¦ç¿’ç›®æ¨™

- Next.jsã¨ã¯ä½•ã‹ã‚’ç†è§£ã™ã‚‹
- Next.jsã®ä¸»è¦ãªç‰¹å¾´ã‚’æŠŠæ¡ã™ã‚‹
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åŸºæœ¬æ§‹é€ ã‚’ç†è§£ã™ã‚‹
- é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•ã‚’å­¦ã¶
- æœ€åˆã®Next.jsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹

## ğŸ“– Next.jsã¨ã¯

Next.jsã¯ã€Reactã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚Reactã®æŸ”è»Ÿæ€§ã‚’ä¿ã¡ãªãŒã‚‰ã€æœ¬ç•ªç’°å¢ƒã§å¿…è¦ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

### ä¸»è¦ãªç‰¹å¾´

#### 1. **App Routerï¼ˆæ¨å¥¨ï¼‰**
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®éšå±¤åŒ–ã¨ãƒã‚¹ãƒˆ
- Server Componentsã¨Client Componentsã®çµ±åˆ

#### 2. **Server-Side Rendering (SSR)**
- ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã®HTMLãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- åˆæœŸãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰ã®é«˜é€ŸåŒ–
- SEOå¯¾å¿œã®å‘ä¸Š

#### 3. **Static Site Generation (SSG)**
- ãƒ“ãƒ«ãƒ‰æ™‚ã®é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
- CDNã§ã®é«˜é€Ÿé…ä¿¡
- å„ªã‚ŒãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

#### 4. **TypeScript ã‚µãƒãƒ¼ãƒˆ**
- æ¨™æº–ã§TypeScriptã‚’ã‚µãƒãƒ¼ãƒˆ
- å‹å®‰å…¨æ€§ã«ã‚ˆã‚‹é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Š
- è‡ªå‹•çš„ãªå‹æ¨è«–

#### 5. **API Routes**
- ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é–¢æ•°ã¨ã—ã¦ã®APIä½œæˆ
- ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯é–‹ç™ºã®å®Ÿç¾
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æºã®ç°¡ç´ åŒ–

## ğŸ—ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã®ç†è§£

Next.js 13ä»¥é™ã§ã¯ã€App RouterãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚åŸºæœ¬çš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

### åŸºæœ¬æ§‹é€ 

```
my-next-app/
â”œâ”€â”€ app/                    # App Routerï¼ˆãƒ¡ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
â”‚   â”œâ”€â”€ layout.tsx         # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ page.tsx           # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ globals.css        # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â””â”€â”€ favicon.ico        # ãƒ•ã‚¡ãƒ“ã‚³ãƒ³
â”œâ”€â”€ public/                # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ icons/
â”œâ”€â”€ components/            # å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ lib/                   # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”œâ”€â”€ types/                 # TypeScriptå‹å®šç¾©
â”œâ”€â”€ next.config.js         # Next.jsè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ tsconfig.json          # TypeScriptè¨­å®š
â”œâ”€â”€ package.json           # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â””â”€â”€ README.md             # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèª¬æ˜
```

### é‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

#### `app/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
App Routerã®ä¸­å¿ƒã¨ãªã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã™ã€‚

- **`layout.tsx`**: å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å®šç¾©
- **`page.tsx`**: å„ãƒ«ãƒ¼ãƒˆã®ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
- **`loading.tsx`**: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®UI
- **`error.tsx`**: ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã®UI
- **`not-found.tsx`**: 404ãƒšãƒ¼ã‚¸

#### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- **`next.config.js`**: Next.jsã®å‹•ä½œè¨­å®š
- **`tsconfig.json`**: TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ©è¨­å®š
- **`package.json`**: ä¾å­˜é–¢ä¿‚ã¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®šç¾©

## ğŸš€ é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

Next.jsé–‹ç™ºã«å¿…è¦ãªç’°å¢ƒï¼š

- **Node.js**: 18.0ä»¥ä¸Šï¼ˆæ¨å¥¨: æœ€æ–°LTSç‰ˆï¼‰
- **npm**: Node.jsã«ä»˜å±ï¼ˆã¾ãŸã¯ yarnã€pnpmï¼‰
- **ã‚¨ãƒ‡ã‚£ã‚¿**: VS Codeæ¨å¥¨ï¼ˆNext.jsæ‹¡å¼µæ©Ÿèƒ½ã‚ã‚Šï¼‰

### Node.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª

```bash
node --version  # v18.0.0ä»¥ä¸Šã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
npm --version   # npmã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚ç¢ºèª
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

#### 1. create-next-appã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰

```bash
npx create-next-app@latest my-app --typescript --tailwind --eslint --app
```

ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®èª¬æ˜ï¼š
- `--typescript`: TypeScriptã‚’ä½¿ç”¨
- `--tailwind`: Tailwind CSSã‚’å«ã‚ã‚‹
- `--eslint`: ESLintã‚’è¨­å®š
- `--app`: App Routerã‚’ä½¿ç”¨

#### 2. æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
mkdir my-app
cd my-app
npm init -y
npm install next@latest react@latest react-dom@latest
npm install -D typescript @types/react @types/node
```

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
cd my-app
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:3000` ã‚’é–‹ãã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

## ğŸ“ æœ€åˆã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ

å®Ÿéš›ã«æœ€å°é™ã®Next.jsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

### 1. ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ä½œæˆ

`app/layout.tsx`:

```typescript
import type { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'My First Next.js App',
  description: 'Next.jsã§ä½œæˆã—ãŸæœ€åˆã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="ja">
      <body>
        <header>
          <h1>My Next.js App</h1>
        </header>
        <main>{children}</main>
        <footer>
          <p>&copy; 2024 My App</p>
        </footer>
      </body>
    </html>
  )
}
```

### 2. ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã®ä½œæˆ

`app/page.tsx`:

```typescript
export default function HomePage() {
  return (
    <div>
      <h1>Welcome to Next.js!</h1>
      <p>ã“ã‚Œã¯ç§ã®æœ€åˆã®Next.jsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚</p>
    </div>
  )
}
```

### 3. Next.jsè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

`next.config.js`:

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    typedRoutes: true,
  },
}

module.exports = nextConfig
```

## ğŸ”§ é‡è¦ãªæ¦‚å¿µã®è©³ç´°

### Server Components vs Client Components

#### Server Componentsï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ãŒå¯èƒ½
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºãŒå°ã•ã„
- SEOã«æœ‰åˆ©

```typescript
// Server Componentï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
export default function ServerComponent() {
  // ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹
  const data = await fetch('https://api.example.com/data')
  
  return <div>{/* ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° */}</div>
}
```

#### Client Components
- ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªæ©Ÿèƒ½ãŒå¯èƒ½
- React HooksãŒä½¿ç”¨å¯èƒ½

```typescript
'use client' // ã“ã®æŒ‡å®šãŒå¿…è¦

import { useState } from 'react'

export default function ClientComponent() {
  const [count, setCount] = useState(0)
  
  return (
    <button onClick={() => setCount(count + 1)}>
      Count: {count}
    </button>
  )
}
```

### ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 

App Routerã§ã¯ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ãŒãã®ã¾ã¾URLã«ãªã‚Šã¾ã™ï¼š

```
app/
â”œâ”€â”€ page.tsx           # / (ãƒ›ãƒ¼ãƒ )
â”œâ”€â”€ about/
â”‚   â””â”€â”€ page.tsx       # /about
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ page.tsx       # /blog
â”‚   â””â”€â”€ [slug]/
â”‚       â””â”€â”€ page.tsx   # /blog/[slug] (å‹•çš„ãƒ«ãƒ¼ãƒˆ)
â””â”€â”€ dashboard/
    â”œâ”€â”€ layout.tsx     # /dashboard/* å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
    â””â”€â”€ page.tsx       # /dashboard
```

### ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®è¨­å®š

SEOå¯¾å¿œã®ãŸã‚ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨­å®šï¼š

```typescript
import type { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«',
  description: 'ãƒšãƒ¼ã‚¸ã®èª¬æ˜',
  keywords: ['Next.js', 'React', 'TypeScript'],
  openGraph: {
    title: 'ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«',
    description: 'ãƒšãƒ¼ã‚¸ã®èª¬æ˜',
    images: ['/og-image.jpg'],
  },
}
```

## ğŸ› ï¸ é–‹ç™ºãƒ„ãƒ¼ãƒ«ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### æ¨å¥¨VS Codeæ‹¡å¼µæ©Ÿèƒ½

- **ES7+ React/Redux/React-Native snippets**: Reactã‚¹ãƒ‹ãƒšãƒƒãƒˆ
- **TypeScript Importer**: è‡ªå‹•ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- **Tailwind CSS IntelliSense**: Tailwind CSSè£œå®Œ
- **Next.js snippets**: Next.jså°‚ç”¨ã‚¹ãƒ‹ãƒšãƒƒãƒˆ

### ESLintã¨Prettierã®è¨­å®š

`.eslintrc.json`:

```json
{
  "extends": ["next/core-web-vitals"],
  "rules": {
    "prefer-const": "error",
    "no-unused-vars": "warn"
  }
}
```

### TypeScriptè¨­å®šã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

`tsconfig.json`:

```json
{
  "compilerOptions": {
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "exactOptionalPropertyTypes": true
  }
}
```

## ğŸš¨ ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

### 1. ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­

```bash
Error: listen EADDRINUSE: address already in use :::3000
```

**è§£æ±ºæ–¹æ³•**:
```bash
npm run dev -- -p 3001  # åˆ¥ã®ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨
```

### 2. TypeScriptã‚¨ãƒ©ãƒ¼

```
Cannot find module 'next' or its corresponding type declarations
```

**è§£æ±ºæ–¹æ³•**:
```bash
npm install @types/node @types/react @types/react-dom
```

### 3. 'use client'ã®ä½¿ã„åˆ†ã‘

- **Server Component**: ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒã€SEOé‡è¦–
- **Client Component**: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã€çŠ¶æ…‹ç®¡ç†

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

åŸºæœ¬ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ç†è§£ã—ãŸã‚‰ã€æ¬¡ã¯ä»¥ä¸‹ã‚’å­¦ç¿’ã—ã¾ã—ã‚‡ã†ï¼š

1. **ãƒšãƒ¼ã‚¸ã¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°** - è¤‡æ•°ãƒšãƒ¼ã‚¸ã®ä½œæˆã¨å‹•çš„ãƒ«ãƒ¼ãƒˆ
2. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ** - å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ
3. **ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°** - APIã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—
4. **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°** - CSS Modulesã‚„Tailwind CSSã®æ´»ç”¨

## ğŸ“š å‚è€ƒè³‡æ–™

- [Next.jså…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nextjs.org/docs)
- [Reactå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://react.dev/)
- [TypeScriptå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.typescriptlang.org/docs/)
- [Next.js Learn](https://nextjs.org/learn) - å…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«

## ğŸ’¡ ã¾ã¨ã‚

ã“ã®ç« ã§ã¯ã€Next.jsã®åŸºæœ¬æ¦‚å¿µã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã«ã¤ã„ã¦å­¦ç¿’ã—ã¾ã—ãŸã€‚é‡è¦ãªãƒã‚¤ãƒ³ãƒˆï¼š

- Next.jsã¯Reactãƒ™ãƒ¼ã‚¹ã®ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- App RouterãŒç¾åœ¨ã®æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
- Server Componentsã¨Client Componentsã®ä½¿ã„åˆ†ã‘ãŒé‡è¦
- TypeScriptã¨ã®çµ„ã¿åˆã‚ã›ã§å‹å®‰å…¨ãªé–‹ç™ºãŒå¯èƒ½

æ¬¡ã®ç« ã§ã¯ã€å®Ÿéš›ã«ãƒšãƒ¼ã‚¸ã‚’è¿½åŠ ã—ã¦ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã‚’è©³ã—ãå­¦ç¿’ã—ã¦ã„ãã¾ã™ã€‚